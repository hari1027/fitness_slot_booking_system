{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./login.css';import{useNavigate}from'react-router-dom';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[userId,setUserId]=useState('');const[phoneNumber,setPhoneNumber]=useState('');const[errorId,setErrorId]=useState(false);const[errorNumber,setErrorNumber]=useState(false);const[rememberMe,setRememberMe]=useState(false);useEffect(()=>{const savedUserId=Cookies.get('userId');const savedPhoneNumber=Cookies.get('phoneNumber');if(savedUserId&&savedPhoneNumber){setUserId(savedUserId);setPhoneNumber(savedPhoneNumber);setRememberMe(true);setErrorId(false);setErrorNumber(false);}},[]);const handleUserIdChange=event=>{setUserId(event.target.value);validateUserId(event.target.value);};const handlePhoneNumberChange=event=>{setPhoneNumber(event.target.value);validatePhoneNumber(event.target.value);};const validateUserId=value=>{const trimmedValue=value.trim();if(trimmedValue===''){setErrorId('UserId cannot be empty.');}else if(!/^\\d{5}$/.test(trimmedValue)){setErrorId('UserId must contain exactly 5 digits.');}else{setErrorId(false);}};const validatePhoneNumber=value=>{const trimmedValue=value.trim();if(trimmedValue===''){setErrorNumber('PhoneNumber cannot be empty.');}else if(!/^[6-9]\\d{9}$/.test(trimmedValue)){setErrorNumber('PhoneNumber must contain exactly 10 digits and start with 6, 7, 8, or 9.');}else{setErrorNumber(false);}};const handleRememberMeChange=event=>{setRememberMe(event.target.checked);};const login=async(userId,phoneNumber)=>{let requestData={userId:userId,phoneNumber:phoneNumber};try{const response=await fetch('https://fitness-booking-backend-production.up.railway.app/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(requestData)});const result=await response.json();console.log(result);if(result.status){if(rememberMe){Cookies.set('userId',userId,{expires:7});Cookies.set('phoneNumber',phoneNumber,{expires:7});}else{Cookies.remove('userId');Cookies.remove('phoneNumber');}navigate(`/home/${userId}`);}else{if(result.message===\"UserId already taken\"){setErrorId(result.message);}else if(result.message===\"User already exists with this phoneNumber\"){setErrorNumber(result.message);}}}catch(error){console.error('Error while login:',error);}};const handleSubmit=async event=>{event.preventDefault();if(userId===\"\"){setErrorId(\"userId is required\");}else if(phoneNumber===\"\"){setErrorNumber(\"phoneNumber is required\");}else if(!errorId&&!errorNumber){console.log('userId:',userId,'phoneNumber:',phoneNumber);login(userId,phoneNumber);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userId,onChange:handleUserIdChange,placeholder:\"userId\",className:\"field\"}),errorId&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorId}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:phoneNumber,onChange:handlePhoneNumberChange,placeholder:\"phoneNumber\",className:\"field\"}),errorNumber&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorNumber}),/*#__PURE__*/_jsxs(\"div\",{className:\"rememberMeContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:rememberMe,onChange:handleRememberMeChange,className:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{className:\"rememberMeWord\",children:\"Remember Me\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:errorId===false&&errorNumber===false?handleSubmit:null,className:errorId===false&&errorNumber===false?'enabledButton':'disabledButton',children:\"Login\"})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Cookies","jsx","_jsx","jsxs","_jsxs","Login","navigate","userId","setUserId","phoneNumber","setPhoneNumber","errorId","setErrorId","errorNumber","setErrorNumber","rememberMe","setRememberMe","savedUserId","get","savedPhoneNumber","handleUserIdChange","event","target","value","validateUserId","handlePhoneNumberChange","validatePhoneNumber","trimmedValue","trim","test","handleRememberMeChange","checked","login","requestData","response","fetch","method","headers","body","JSON","stringify","result","json","console","log","status","set","expires","remove","message","error","handleSubmit","preventDefault","className","children","type","onChange","placeholder","onClick"],"sources":["C:/Users/hari0/OneDrive/Documents/fitness-booking-frontend/src/Login/login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './login.css'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const [userId, setUserId] = useState('');\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n  const [errorId, setErrorId] = useState(false);\r\n  const [errorNumber, setErrorNumber] = useState(false);\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedUserId = Cookies.get('userId');\r\n    const savedPhoneNumber = Cookies.get('phoneNumber');\r\n\r\n    if (savedUserId && savedPhoneNumber) {\r\n      setUserId(savedUserId);\r\n      setPhoneNumber(savedPhoneNumber);\r\n      setRememberMe(true);\r\n      setErrorId(false);\r\n      setErrorNumber(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleUserIdChange = (event) => {\r\n    setUserId(event.target.value);\r\n    validateUserId(event.target.value);\r\n  };\r\n\r\n  const handlePhoneNumberChange = (event) => {\r\n    setPhoneNumber(event.target.value);\r\n    validatePhoneNumber(event.target.value);\r\n  };\r\n\r\n  const validateUserId = (value) => {\r\n    const trimmedValue = value.trim();\r\n    if (trimmedValue === '') {\r\n        setErrorId('UserId cannot be empty.');\r\n    } else if (!/^\\d{5}$/.test(trimmedValue)) {\r\n        setErrorId('UserId must contain exactly 5 digits.');\r\n    } else {\r\n        setErrorId(false);\r\n    }\r\n  };\r\n\r\n  const validatePhoneNumber = (value) => {\r\n    const trimmedValue = value.trim();\r\n    if (trimmedValue === '') {\r\n        setErrorNumber('PhoneNumber cannot be empty.');\r\n    } else if (!/^[6-9]\\d{9}$/.test(trimmedValue)) {\r\n        setErrorNumber('PhoneNumber must contain exactly 10 digits and start with 6, 7, 8, or 9.');\r\n    } else {\r\n        setErrorNumber(false);\r\n    }\r\n  };\r\n\r\n  const handleRememberMeChange = (event) => {\r\n    setRememberMe(event.target.checked);\r\n  };\r\n\r\n  const login = async (userId,phoneNumber) => {\r\n    let requestData ={\r\n        userId: userId,\r\n        phoneNumber: phoneNumber\r\n    }\r\n    try {\r\n        const response = await fetch('https://fitness-booking-backend-production.up.railway.app/login', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(requestData),\r\n        });\r\n        const result = await response.json();\r\n        console.log(result)\r\n        if (result.status) {\r\n            if (rememberMe) {\r\n                Cookies.set('userId', userId, { expires: 7 });\r\n                Cookies.set('phoneNumber', phoneNumber, { expires: 7 });\r\n            } else {\r\n                Cookies.remove('userId');\r\n                Cookies.remove('phoneNumber');\r\n            }\r\n            navigate(`/home/${userId}`);\r\n        } else {\r\n           if(result.message === \"UserId already taken\"){\r\n                setErrorId(result.message)\r\n           }\r\n           else if (result.message === \"User already exists with this phoneNumber\"){\r\n                setErrorNumber(result.message)\r\n           }\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.error('Error while login:', error);\r\n      }\r\n  }\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if(userId === \"\"){\r\n        setErrorId(\"userId is required\")\r\n    }\r\n    else if(phoneNumber === \"\"){\r\n        setErrorNumber(\"phoneNumber is required\")\r\n    }\r\n    else if (!errorId && !errorNumber) {\r\n       console.log('userId:', userId , 'phoneNumber:' , phoneNumber);\r\n       login(userId,phoneNumber);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <label className='label'>Login</label>\r\n        <input\r\n          type=\"text\"\r\n          value={userId}\r\n          onChange={handleUserIdChange}\r\n          placeholder=\"userId\"\r\n          className='field'\r\n        />\r\n        {errorId && <p className=\"error-message\">{errorId}</p>}\r\n        <input\r\n          type=\"text\"\r\n          value={phoneNumber}\r\n          onChange={handlePhoneNumberChange}\r\n          placeholder=\"phoneNumber\"\r\n          className='field'\r\n        />\r\n         {errorNumber && <p className=\"error-message\">{errorNumber}</p>}\r\n        <div className='rememberMeContainer'>\r\n          <input\r\n          type=\"checkbox\"\r\n          checked={rememberMe}\r\n          onChange={handleRememberMeChange}\r\n          className='checkbox'\r\n          />\r\n          <label className='rememberMeWord'>\r\n             Remember Me\r\n          </label>\r\n        </div>\r\n        <button onClick={(errorId === false && errorNumber === false)? handleSubmit : null} className={(errorId === false && errorNumber === false) ? 'enabledButton' : 'disabledButton'}>\r\n          Login\r\n        </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,aAAa,CACpB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAEnDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,WAAW,CAAGjB,OAAO,CAACkB,GAAG,CAAC,QAAQ,CAAC,CACzC,KAAM,CAAAC,gBAAgB,CAAGnB,OAAO,CAACkB,GAAG,CAAC,aAAa,CAAC,CAEnD,GAAID,WAAW,EAAIE,gBAAgB,CAAE,CACnCX,SAAS,CAACS,WAAW,CAAC,CACtBP,cAAc,CAACS,gBAAgB,CAAC,CAChCH,aAAa,CAAC,IAAI,CAAC,CACnBJ,UAAU,CAAC,KAAK,CAAC,CACjBE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,kBAAkB,CAAIC,KAAK,EAAK,CACpCb,SAAS,CAACa,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7BC,cAAc,CAACH,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACpC,CAAC,CAED,KAAM,CAAAE,uBAAuB,CAAIJ,KAAK,EAAK,CACzCX,cAAc,CAACW,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAClCG,mBAAmB,CAACL,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACzC,CAAC,CAED,KAAM,CAAAC,cAAc,CAAID,KAAK,EAAK,CAChC,KAAM,CAAAI,YAAY,CAAGJ,KAAK,CAACK,IAAI,CAAC,CAAC,CACjC,GAAID,YAAY,GAAK,EAAE,CAAE,CACrBf,UAAU,CAAC,yBAAyB,CAAC,CACzC,CAAC,IAAM,IAAI,CAAC,SAAS,CAACiB,IAAI,CAACF,YAAY,CAAC,CAAE,CACtCf,UAAU,CAAC,uCAAuC,CAAC,CACvD,CAAC,IAAM,CACHA,UAAU,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAc,mBAAmB,CAAIH,KAAK,EAAK,CACrC,KAAM,CAAAI,YAAY,CAAGJ,KAAK,CAACK,IAAI,CAAC,CAAC,CACjC,GAAID,YAAY,GAAK,EAAE,CAAE,CACrBb,cAAc,CAAC,8BAA8B,CAAC,CAClD,CAAC,IAAM,IAAI,CAAC,cAAc,CAACe,IAAI,CAACF,YAAY,CAAC,CAAE,CAC3Cb,cAAc,CAAC,0EAA0E,CAAC,CAC9F,CAAC,IAAM,CACHA,cAAc,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAAgB,sBAAsB,CAAIT,KAAK,EAAK,CACxCL,aAAa,CAACK,KAAK,CAACC,MAAM,CAACS,OAAO,CAAC,CACrC,CAAC,CAED,KAAM,CAAAC,KAAK,CAAG,KAAAA,CAAOzB,MAAM,CAACE,WAAW,GAAK,CAC1C,GAAI,CAAAwB,WAAW,CAAE,CACb1B,MAAM,CAAEA,MAAM,CACdE,WAAW,CAAEA,WACjB,CAAC,CACD,GAAI,CACA,KAAM,CAAAyB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,iEAAiE,CAAE,CAC9FC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,WAAW,CAClC,CAAC,CAAC,CACF,KAAM,CAAAQ,MAAM,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACpCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC,CACnB,GAAIA,MAAM,CAACI,MAAM,CAAE,CACf,GAAI9B,UAAU,CAAE,CACZf,OAAO,CAAC8C,GAAG,CAAC,QAAQ,CAAEvC,MAAM,CAAE,CAAEwC,OAAO,CAAE,CAAE,CAAC,CAAC,CAC7C/C,OAAO,CAAC8C,GAAG,CAAC,aAAa,CAAErC,WAAW,CAAE,CAAEsC,OAAO,CAAE,CAAE,CAAC,CAAC,CAC3D,CAAC,IAAM,CACH/C,OAAO,CAACgD,MAAM,CAAC,QAAQ,CAAC,CACxBhD,OAAO,CAACgD,MAAM,CAAC,aAAa,CAAC,CACjC,CACA1C,QAAQ,CAAC,SAASC,MAAM,EAAE,CAAC,CAC/B,CAAC,IAAM,CACJ,GAAGkC,MAAM,CAACQ,OAAO,GAAK,sBAAsB,CAAC,CACxCrC,UAAU,CAAC6B,MAAM,CAACQ,OAAO,CAAC,CAC/B,CAAC,IACI,IAAIR,MAAM,CAACQ,OAAO,GAAK,2CAA2C,CAAC,CACnEnC,cAAc,CAAC2B,MAAM,CAACQ,OAAO,CAAC,CACnC,CACH,CACF,CACA,MAAOC,KAAK,CAAE,CACZP,OAAO,CAACO,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACJ,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAA9B,KAAK,EAAK,CACpCA,KAAK,CAAC+B,cAAc,CAAC,CAAC,CACtB,GAAG7C,MAAM,GAAK,EAAE,CAAC,CACbK,UAAU,CAAC,oBAAoB,CAAC,CACpC,CAAC,IACI,IAAGH,WAAW,GAAK,EAAE,CAAC,CACvBK,cAAc,CAAC,yBAAyB,CAAC,CAC7C,CAAC,IACI,IAAI,CAACH,OAAO,EAAI,CAACE,WAAW,CAAE,CAChC8B,OAAO,CAACC,GAAG,CAAC,SAAS,CAAErC,MAAM,CAAG,cAAc,CAAGE,WAAW,CAAC,CAC7DuB,KAAK,CAACzB,MAAM,CAACE,WAAW,CAAC,CAC5B,CACF,CAAC,CAED,mBACEL,KAAA,QAAKiD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BpD,IAAA,UAAOmD,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cACpCpD,IAAA,UACEqD,IAAI,CAAC,MAAM,CACXhC,KAAK,CAAEhB,MAAO,CACdiD,QAAQ,CAAEpC,kBAAmB,CAC7BqC,WAAW,CAAC,QAAQ,CACpBJ,SAAS,CAAC,OAAO,CAClB,CAAC,CACD1C,OAAO,eAAIT,IAAA,MAAGmD,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAE3C,OAAO,CAAI,CAAC,cACtDT,IAAA,UACEqD,IAAI,CAAC,MAAM,CACXhC,KAAK,CAAEd,WAAY,CACnB+C,QAAQ,CAAE/B,uBAAwB,CAClCgC,WAAW,CAAC,aAAa,CACzBJ,SAAS,CAAC,OAAO,CAClB,CAAC,CACAxC,WAAW,eAAIX,IAAA,MAAGmD,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzC,WAAW,CAAI,CAAC,cAC/DT,KAAA,QAAKiD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCpD,IAAA,UACAqD,IAAI,CAAC,UAAU,CACfxB,OAAO,CAAEhB,UAAW,CACpByC,QAAQ,CAAE1B,sBAAuB,CACjCuB,SAAS,CAAC,UAAU,CACnB,CAAC,cACFnD,IAAA,UAAOmD,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,aAElC,CAAO,CAAC,EACL,CAAC,cACNpD,IAAA,WAAQwD,OAAO,CAAG/C,OAAO,GAAK,KAAK,EAAIE,WAAW,GAAK,KAAK,CAAGsC,YAAY,CAAG,IAAK,CAACE,SAAS,CAAG1C,OAAO,GAAK,KAAK,EAAIE,WAAW,GAAK,KAAK,CAAI,eAAe,CAAG,gBAAiB,CAAAyC,QAAA,CAAC,OAElL,CAAQ,CAAC,EACR,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjD,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}