{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./table.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClassesTable=_ref=>{let{classes}=_ref;const[currentPage,setCurrentPage]=useState(1);const[filters,setFilters]=useState({classType:[]});const[filterMenuVisible,setFilterMenuVisible]=useState(false);const itemsPerPage=5;const userIds=new Set();classes.forEach(c=>{c.bookedIds.forEach(id=>userIds.add(id));c.waitlistIds.forEach(id=>userIds.add(id));});const userIdList=Array.from(userIds);const getClassesForUser=userId=>{const bookedClasses=classes.filter(c=>c.bookedIds.includes(userId)).map(c=>c.type).join(', ')||'-';const waitingClasses=classes.filter(c=>c.waitlistIds.includes(userId)).map(c=>c.type).join(', ')||'-';return{bookedClasses,waitingClasses};};const handlePageChange=newPage=>{setCurrentPage(newPage);};const filteredUsers=userIdList.filter(userId=>{const filterByClassType=filters.classType.length===0||filters.classType.some(classType=>{return classes.some(c=>c.type===classType&&(c.bookedIds.includes(userId)||c.waitlistIds.includes(userId)));});return filterByClassType;});const totalPages=Math.ceil(filteredUsers.length/itemsPerPage);useEffect(()=>{if(totalPages===0){setCurrentPage(0);}if(totalPages>0){setCurrentPage(1);}},[filters,totalPages]);const startIndex=(currentPage-1)*itemsPerPage;const currentUsers=filteredUsers.slice(startIndex,startIndex+itemsPerPage);const handleClassTypeChange=classType=>{setFilters(prevFilters=>{const isSelected=prevFilters.classType.includes(classType);return{...prevFilters,classType:isSelected?prevFilters.classType.filter(ct=>ct!==classType):[...prevFilters.classType,classType]};});};const toggleFilterMenu=()=>{setFilterMenuVisible(prev=>!prev);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"UserId\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Booked Classes\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wait Listed Classes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentUsers.length>0?currentUsers.map(userId=>{const{bookedClasses,waitingClasses}=getClassesForUser(userId);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:userId}),/*#__PURE__*/_jsx(\"td\",{children:bookedClasses}),/*#__PURE__*/_jsx(\"td\",{children:waitingClasses})]},userId);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"noUserFound\",children:\"No users found\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1||currentPage===0,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"pageLabel\",children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages||currentPage===0,children:\"Next\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:toggleFilterMenu,className:filters.classType.length>0?'selectedFilterButton':'filterButton',children:[\"Filter\",filterMenuVisible&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filterOptionsHeader\",children:\"Filter by class\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"subLabel\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:filters.classType.includes('Yoga'),onChange:()=>handleClassTypeChange('Yoga'),className:\"checkbox\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Yoga\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"subLabel\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:filters.classType.includes('Gym'),onChange:()=>handleClassTypeChange('Gym'),className:\"checkbox\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Gym\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"subLabel\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:filters.classType.includes('Dance'),onChange:()=>handleClassTypeChange('Dance'),className:\"checkbox\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Dance\"})]})]})]})]})]})]});};export default ClassesTable;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ClassesTable","_ref","classes","currentPage","setCurrentPage","filters","setFilters","classType","filterMenuVisible","setFilterMenuVisible","itemsPerPage","userIds","Set","forEach","c","bookedIds","id","add","waitlistIds","userIdList","Array","from","getClassesForUser","userId","bookedClasses","filter","includes","map","type","join","waitingClasses","handlePageChange","newPage","filteredUsers","filterByClassType","length","some","totalPages","Math","ceil","startIndex","currentUsers","slice","handleClassTypeChange","prevFilters","isSelected","ct","toggleFilterMenu","prev","children","colSpan","className","onClick","disabled","checked","onChange"],"sources":["C:/Users/hari0/OneDrive/Documents/fitness-booking-frontend/src/Home/table.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './table.css';\r\n\r\nconst ClassesTable = ({ classes }) => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [filters, setFilters] = useState({\r\n    classType: [],\r\n  });\r\n  const [filterMenuVisible, setFilterMenuVisible] = useState(false);\r\n\r\n  const itemsPerPage = 5;\r\n\r\n  const userIds = new Set();\r\n  classes.forEach(c => {\r\n    c.bookedIds.forEach(id => userIds.add(id));\r\n    c.waitlistIds.forEach(id => userIds.add(id));\r\n  });\r\n\r\n  const userIdList = Array.from(userIds);\r\n\r\n  const getClassesForUser = (userId) => {\r\n    const bookedClasses = classes\r\n      .filter(c => c.bookedIds.includes(userId))\r\n      .map(c => c.type)\r\n      .join(', ') || '-';\r\n\r\n    const waitingClasses = classes\r\n      .filter(c => c.waitlistIds.includes(userId))\r\n      .map(c => c.type)\r\n      .join(', ') || '-';\r\n\r\n    return { bookedClasses, waitingClasses };\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    setCurrentPage(newPage);\r\n  };\r\n\r\n\r\n  const filteredUsers = userIdList.filter((userId) => {\r\n    const filterByClassType = filters.classType.length === 0 || filters.classType.some(classType => {\r\n      return classes.some(c => c.type === classType && (c.bookedIds.includes(userId) || c.waitlistIds.includes(userId)));\r\n    });\r\n\r\n    return filterByClassType;\r\n  });\r\n\r\n  const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);\r\n\r\n  useEffect(() => {\r\n    if(totalPages === 0){\r\n      setCurrentPage(0);\r\n    }\r\n    if (totalPages > 0) {\r\n      setCurrentPage(1);\r\n    }\r\n  }, [filters, totalPages]);\r\n\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const currentUsers = filteredUsers.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n  const handleClassTypeChange = (classType) => {\r\n    setFilters(prevFilters => {\r\n      const isSelected = prevFilters.classType.includes(classType);\r\n      return {\r\n        ...prevFilters,\r\n        classType: isSelected\r\n          ? prevFilters.classType.filter(ct => ct !== classType)\r\n          : [...prevFilters.classType, classType]\r\n      };\r\n    });\r\n  };\r\n\r\n  const toggleFilterMenu = () => {\r\n    setFilterMenuVisible(prev => !prev);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>UserId</th>\r\n            <th>Booked Classes</th>\r\n            <th>Wait Listed Classes</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {currentUsers.length > 0 ? (\r\n            currentUsers.map(userId => {\r\n              const { bookedClasses, waitingClasses } = getClassesForUser(userId);\r\n              return (\r\n                <tr key={userId}>\r\n                  <td>{userId}</td>\r\n                  <td>{bookedClasses}</td>\r\n                  <td>{waitingClasses}</td>\r\n                </tr>\r\n              );\r\n            })\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"4\" className=\"noUserFound\">No users found</td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"pagination\">\r\n        <button\r\n          onClick={() => handlePageChange(currentPage - 1)}\r\n          disabled={currentPage === 1  || currentPage === 0}\r\n        >\r\n          Previous\r\n        </button>\r\n        <span className=\"pageLabel\">Page {currentPage} of {totalPages}</span>\r\n        <button\r\n          onClick={() => handlePageChange(currentPage + 1)}\r\n          disabled={currentPage === totalPages || currentPage === 0}\r\n        >\r\n          Next\r\n        </button>\r\n        <button\r\n          onClick={toggleFilterMenu}\r\n          className={filters.classType.length > 0 ? 'selectedFilterButton' : 'filterButton'}\r\n        >\r\n          Filter\r\n          {filterMenuVisible && (\r\n            <div className=\"filter-menu\">\r\n              <div className='filterOptionsHeader'>\r\n                Filter by class\r\n              </div>\r\n              <div>\r\n                <label className='subLabel'>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.classType.includes('Yoga')}\r\n                    onChange={() => handleClassTypeChange('Yoga')}\r\n                    className='checkbox'\r\n                  />\r\n                  <p>Yoga</p>\r\n                </label>\r\n                <label className='subLabel'>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.classType.includes('Gym')}\r\n                    onChange={() => handleClassTypeChange('Gym')}\r\n                    className='checkbox'\r\n                  />\r\n                  <p>Gym</p>\r\n                </label>\r\n                <label className='subLabel'>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={filters.classType.includes('Dance')}\r\n                    onChange={() => handleClassTypeChange('Dance')}\r\n                    className='checkbox'\r\n                  />\r\n                  <p>Dance</p>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassesTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}